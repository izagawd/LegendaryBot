@page "/inventory/blessings/{BlessingTypeId:int}"
@using System.Reflection.Metadata
@using Microsoft.AspNetCore.Authorization
@using Website.Components.Navigation
@using Website.Components

@attribute [Authorize]

@inject HttpClient Http;
@code {
   [Parameter]  public int BlessingTypeId { get; set; }
   
   public BlessingInfoDto? BlessingData { get; set; }
   private string? ErrorString;
   protected override async Task OnInitializedAsync()
   {
      var result = await Http.GetAsync($"BlessingInfoPage/get?blessingTypeId={BlessingTypeId}");
      if (result.IsSuccessStatusCode)
      {
         BlessingData = await result.Content.ReadFromJsonAsync<BlessingInfoDto>();
      }
      else
      {
         ErrorString = await result.Content.ReadAsStringAsync();
      }
   }

}

<InventoryNavigation>
   @if (ErrorString is not null)
   {
      <HugeText TheText=@ErrorString ></HugeText>
   } else if (BlessingData is null)
   {
      <HugeText TheText="Loading..." ></HugeText>
   }
   else
   {
      <div class="parent">
         <div class="blessing-holder">
            <div class="blessing-details">
               <img src="@BlessingData.Blessing.ImageUrl"/>
               <p>@BlessingData.Blessing.Name</p>
               <p>@(string.Concat(Enumerable.Repeat("\u2b50",BlessingData.Blessing.RarityNum)))</p>
            </div>
            <p class="blessing-description">@BlessingData.Blessing.Description</p>
         </div>
         <div class="characters-holder">
            <div class="filterer">
               
            </div>
            <div class="character-containers">
               @foreach (var i in BlessingData.Characters)
               {
                  <div>
                     
                  </div>
               }
            </div>
         </div>
      </div>
   }

</InventoryNavigation>