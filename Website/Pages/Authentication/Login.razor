@page "/authentication/login"
@using Blazored.LocalStorage
@using PublicInfo
@using Website.Components
@inject NavigationManager Nav
@inject HttpClient HttpClient
@inject AuthenticationStateProvider provider
@inject ILocalStorageService StorageService
@inject NavigationService NavService

<PageText TheText="Redirecting..."></PageText>
@code {

    protected override void OnInitialized()
    {

        if (Nav.Uri.Contains("authentication/login", StringComparison.CurrentCultureIgnoreCase))
        {
            NavService.DesiredRedirectLocation = "/";
        }
        else
        {
            NavService.DesiredRedirectLocation = Nav.Uri;
        }
        Nav.NavigateTo($"https://discord.com/oauth2/authorize?client_id={Information.DiscordClientId}&scope=identify&response_type=code&redirect_uri=" +
                       $"{Uri.EscapeDataString($"{Information.WebsiteDomainName}/authentication/callback")}");

    }

}